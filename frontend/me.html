<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль - ScienceHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<!-- Редактирование профиля -->
<div class="profile-card">
    <h4><i class="bi bi-person-lines-fill me-2"></i>Редактирование профиля</h4>
    
    <!-- Аватар и основная информация -->
    <div class="row align-items-center mb-4">
        <div class="col-auto">
            <div class="avatar-container position-relative">
                <img src="https://via.placeholder.com/120" 
                     class="avatar-preview rounded-circle" 
                     alt="Аватар"
                     id="avatarPreview">
                <label for="avatarUpload" 
                       class="btn btn-sm btn-light avatar-upload-btn position-absolute bottom-0 end-0">
                    <i class="bi bi-camera"></i>
                </label>
                <input type="file" 
                       id="avatarUpload" 
                       accept="image/*" 
                       class="d-none">
            </div>
        </div>
        
        <div class="col">
            <div class="row g-2">
                <div class="col-md-6">
                    <label for="firstName" class="form-label">Имя</label>
                    <input type="text" 
                           class="form-control" 
                           id="firstName" 
                           placeholder="Введите ваше имя">
                </div>
                <div class="col-md-6">
                    <label for="lastName" class="form-label">Фамилия</label>
                    <input type="text" 
                           class="form-control" 
                           id="lastName" 
                           placeholder="Введите вашу фамилию">
                </div>
            </div>
        </div>
    </div>

    <!-- Дополнительные поля -->
    <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" 
               class="form-control" 
               id="email" 
               placeholder="example@domain.com">
    </div>

    <div class="mb-3">
        <label for="bio" class="form-label">О себе</label>
        <textarea class="form-control" 
                  id="bio" 
                  rows="3" 
                  placeholder="Расскажите о себе"></textarea>
    </div>

    <div class="mb-3">
        <label for="phone" class="form-label">Телефон</label>
        <input type="tel" 
               class="form-control" 
               id="phone" 
               placeholder="+992 123 456 7890">
    </div>

    <!-- Кнопки действий -->
    <div class="d-flex gap-2 justify-content-end mt-4">
        <button type="button" 
                class="btn btn-outline-secondary" 
                id="cancelBtn">Отмена</button>
        <button type="button" 
                class="btn btn-primary" 
                id="saveBtn">Сохранить изменения</button>
    </div>
</div>

<style>
.avatar-container {
    width: 120px;
    height: 120px;
}

.avatar-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.avatar-upload-btn {
    padding: 0.35rem;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.avatar-upload-btn:hover {
    background-color: #e9ecef;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const avatarUpload = document.getElementById('avatarUpload');
    const avatarPreview = document.getElementById('avatarPreview');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');

    // Загрузка аватара
    avatarUpload.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (e) => {
                avatarPreview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });

    // Сохранение данных
    saveBtn.addEventListener('click', async () => {
        const formData = new FormData();
        formData.append('avatar', avatarUpload.files[0]);
        formData.append('firstName', document.getElementById('firstName').value);
        formData.append('lastName', document.getElementById('lastName').value);
        formData.append('email', document.getElementById('email').value);
        formData.append('bio', document.getElementById('bio').value);
        formData.append('phone', document.getElementById('phone').value);

        try {
            saveBtn.disabled = true;
            // Здесь должна быть реальная отправка на сервер
            await new Promise(resolve => setTimeout(resolve, 1000));
            showToast('Изменения успешно сохранены!', 'success');
        } catch (error) {
            showToast('Ошибка при сохранении', 'danger');
        } finally {
            saveBtn.disabled = false;
        }
    });

    // Отмена изменений
    cancelBtn.addEventListener('click', () => {
        // Здесь должен быть код для сброса к исходным значениям
        avatarPreview.src = 'https://via.placeholder.com/120';
        avatarUpload.value = '';
        document.getElementById('firstName').value = '';
        document.getElementById('lastName').value = '';
        document.getElementById('email').value = '';
        document.getElementById('bio').value = '';
        document.getElementById('phone').value = '';
    });

    function showToast(message, type) {
        const toast = document.createElement('div');
        toast.className = `toast show align-items-center text-bg-${type} border-0`;
        toast.innerHTML = `
            <div class="d-flex">
                <div class="toast-body">${message}</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        `;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    }
});
</script>
</body>
</html>